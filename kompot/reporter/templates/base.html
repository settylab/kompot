<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>{{TITLE}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/plotly.min.js"></script>
    <script src="js/datatables.min.js"></script>
    <script src="js/kompot_report.js"></script>
</head>
<body>
    <header>
        <h1>{{TITLE}}</h1>
        <p>{{SUBTITLE}}</p>
        <p class="timestamp">Generated: {{TIMESTAMP}}</p>
    </header>
    
    <main>
        <section id="overview">
            <h2>Overview</h2>
            <div id="summary-stats"></div>
        </section>
        
        <section id="gene-table">
            <h2>Top Differentially Expressed Genes</h2>
            <div class="controls">
                <label for="condition-select">Comparison:</label>
                <select id="condition-select"></select>
            </div>
            <div id="gene-table-container"></div>
        </section>
        
        <section id="volcano-plot">
            <h2>Volcano Plot</h2>
            <div class="controls">
                <label for="volcano-x-metric">X-axis:</label>
                <select id="volcano-x-metric">
                    <option value="log2FoldChange">Log2 Fold Change</option>
                    <option value="weighted_fold_change">Weighted Fold Change</option>
                </select>
                <label for="volcano-y-metric">Y-axis:</label>
                <select id="volcano-y-metric">
                    <option value="mahalanobis_distance">Mahalanobis Distance</option>
                    <option value="z_score">Z-score</option>
                </select>
            </div>
            <div id="volcano-plot-container"></div>
        </section>
        
        <section id="umap-plots" style="display: none;">
            <h2>Cell Annotations</h2>
            <div class="controls">
                <label for="umap-annotation">Color by:</label>
                <select id="umap-annotation"></select>
            </div>
            <div id="umap-plot-container"></div>
        </section>
        
        <section id="gene-specific" style="display: none;">
            <h2>Gene-Specific Visualization</h2>
            <div class="controls">
                <label for="gene-search">Search for gene:</label>
                <input type="text" id="gene-search" placeholder="Gene name">
                <button id="search-gene-btn">Search</button>
            </div>
            <div id="gene-plots-container"></div>
        </section>
        
        <section id="method-comparison" style="display: none;">
            <h2>Method Comparison</h2>
            <div class="controls">
                <label for="comparison-select">Comparison:</label>
                <select id="comparison-select"></select>
                <label for="method-select">Method:</label>
                <select id="method-select"></select>
            </div>
            <div id="method-comparison-container"></div>
        </section>
    </main>
    
    <footer>
        <p>Generated with Kompot v0.1.0</p>
        <p>Report ID: {{REPORT_ID}}</p>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initReport('{{REPORT_ID}}');
        });
    </script>
</body>
</html>